<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NS!</title>
    
</head>
<body>
    <style>
        .border{
            border: 2px solid black;
            padding: 5px;
        }
    </style>
    <table>
        <tr>
            <th>Destination</th>
            <th>Departure time</th>
            <th>Platform</th>
        </tr>
        <tr>
            <th class="border" id="0"></th>
            <th class="border" id="0_time"></th>
            <th class="border" id="0_plat"></th>
        </tr>
        <tr>
            <th class="border" id="1"></th>
            <th class="border" id="1_time"></th>
            <th class="border" id="1_plat"></th>
        </tr>
        <tr>
            <th class="border" id="2"></th>
            <th class="border" id="2_time"></th>
            <th class="border" id="2_plat"></th>
        </tr>
        <tr>
            <th class="border" id="3"></th>
            <th class="border" id="3_time"></th>
            <th class="border" id="3_plat"></th>
        </tr>
        <tr>
            <th class="border" id="4"></th>
            <th class="border" id="4_time"></th>
            <th class="border" id="4_plat"></th>
        </tr>
        <tr>
            <th class="border" id="5"></th>
            <th class="border" id="5_time"></th>
            <th class="border" id="5_plat"></th>
        </tr>
        <tr>
            <th class="border" id="6"></th>
            <th class="border" id="6_time"></th>
            <th class="border" id="6_plat"></th>
        </tr>
        <tr>
            <th class="border" id="7"></th>
            <th class="border" id="7_time"></th>
            <th class="border" id="7_plat"></th>
        </tr>
        <tr>
            <th class="border" id="8"></th>
            <th class="border" id="8_time"></th>
            <th class="border" id="8_plat"></th>
        </tr>
        <tr>
            <th class="border" id="9"></th>
            <th class="border" id="9_time"></th>
            <th class="border" id="9_plat"></th>
        </tr>
    </table>
    <script>
        ns();
        async function ns(){
            var obj;
        const res = await fetch('https://gateway.apiportal.ns.nl/reisinformatie-api/api/v2/departures?lang=english&station=Dt&maxJourneys=10', {
        method: "GET",
        withCredentials: true,
        headers: {
            "Cache-Control": "no-cache",
            "Ocp-Apim-Subscription-Key": "417f51d60804417ebfa3d624824558a5" 
        }       
        })

        let info = await res.json();
        const departureArray = info.payload.departures;
        console.log(departureArray[0]);
        for(let i = 0; i < 10; i ++){

            //destination
            let departure = ({direction} = departureArray[i], {direction});
            let str_dep = JSON.stringify(departure);
            str_dep = str_dep.replace('{"direction":"', '');
            str_dep = str_dep.replace('"}', '');

            //time
            let time = ({actualDateTime} = departureArray[i], {actualDateTime});
            let str_time = JSON.stringify(time);
            function removeByIndex(str,index) {
            return str.slice(0,index) + str.slice(index+1);
            }
            str_time = str_time.split('T');
            str_time = str_time[2].split('+');
            str_time = str_time[0].replace('"}', '');

            //platform
            let platform = ({actualTrack} = departureArray[i], {actualTrack});
            let str_plat = JSON.stringify(platform);
            str_plat = str_plat.replace('{"actualTrack":"', '');
            str_plat = str_plat.replace('"}', '');
            console.log(str_plat)
            //display
            document.getElementById(i).innerHTML = str_dep;
            document.getElementById(i + "_time").innerHTML = str_time;
            document.getElementById(i + "_plat").innerHTML = str_plat;

        }
        
        
        }
        
        
  </script>
</body>
</html>